/*
    Whale Song - The Samans
    To my dear shirley :-)

    code by wkcn
    Apr 29, 2018
*/
#include "music_notes.h"
int buzzer = 2;

const char song1[][3] = {
    {5, 12, 2},
    {4, 9, 2},
    {4, 11, 2},
    {5, 12, 2},
    {3, 9, 1},
    {3, 11, 2},
    {2, 9, 2},

    {2, 10, 2},
    {2, 9, 6},
    {2, 10, 6},
    {2, 9, 6},
    {3, 11, 2},
    {3, 9, 2},
    {3, 11, 1},
    {4, 11, 1},

    {5, 12, 2},
    {4, 9, 2},
    {4, 11, 1},
    {3, 9, 1},
    {4, 9, 2},
    {4, 11, 2},

    {4, 9, 2},
    {5, 12, 2},
    {5, 12, 2},
    {5, 11, 6},
    {5, 12, 6},
    {5, 11, 6},
    {5, 9, 1},
    {0, 0, 1},

    // 5
    {5, 12, 2},
    {4, 9, 2},
    {4, 11, 2},
    {5, 12, 2},
    {3, 9, 1},
    {3, 11, 2},
    {2, 9, 2},

    {2, 10, 2},
    {2, 9, 6},
    {2, 10, 6},
    {2, 9, 6},
    {3, 11, 2},
    {3, 9, 2},
    {3, 11, 2},
    {4, 11, 2},
    {3, 11, 2},
    {2, 14, 2},

    // 7
    {2, 14, 2},
    {2, 12, 2},
    {2, 12, 2},
    {2, 10, 2},
    {2, 10, 2},
    {2, 9, 2},
    {3, 9, 2},
    {2, 9, 2},

    {3, 11, -2},
    {3, 11, 2},
    {2, 14, 2},
    {0, 0, 1},

    {2, 14, 2},
    {2, 12, 2},
    {2, 12, 2},
    {2, 10, 2},
    {2, 10, 2},
    {2, 9, 2},
    {3, 9, 2},
    {2, 9, 2},

    {3, 11, -4},
};

const char song2[][3] = {
    // 22
    {4, 11, 2},
    {3, 11, 2},
    {3, 11, 4},
    {3, 9, 4},
    {4, 11, 2},
    {4, 9, 4},
    {4, 11, 4},
    {3, 9, 2},
    {3, 11, 2},
    {3, 13, 2},

    {3, 14, 2},
    {3, 11, 2},
    {3, 13, 2},
    {3, 9, 2},
    {4, 11, 2},
    {4, 9, 4},
    {4, 11, 4},
    {3, 11, 2},
    {3, 9, 2},

    // 24
    {4, 11, 2},
    {3, 11, 2},
    {3, 11, 4},
    {3, 9, 4},
    {4, 11, 2},
    {4, 9, 4},
    {4, 11, 4},
    {3, 9, 2},
    {3, 11, 2},
    {2, 9, 2},

    {2, 10, 2},
    {3, 11, 2},
    {2, 9, 2},
    {2, 12, 2},
    {2, 10, 2},
    {2, 9, 2},
    {3, 11, 2},
    {3, 9, 4},
    {3, 11, 4},

    // 26
    {4, 11, 2},
    {3, 11, 2},
    {3, 11, 4},
    {3, 9, 4},
    {4, 11, 2},
    {4, 9, 4},
    {4, 11, 4},
    {3, 9, 2},
    {3, 11, 2},
    {3, 13, 2},

    // 27
    {3, 14, 2},
    {3, 11, 2},
    {3, 13, 2},
    {3, 9, 2},
    {4, 11, 2},
    {4, 9, 4},
    {4, 11, 4},
    {3, 11, 2},
    {3, 9, 2},

    // 28
    {4, 11, 2},
    {3, 11, 2},
    {3, 11, 4},
    {3, 9, 4},
    {4, 11, 2},
    {4, 9, 4},
    {4, 11, 4},
    {3, 9, 2},
    {3, 11, 2},
    {2, 9, 2},

    {2, 10, 2},
    {3, 11, 2},
    {2, 9, 2},
    {2, 12, 2},
    {2, 10, 2},
    {2, 9, 2},
    {3, 11, 2},
    {3, 9, 4},
    {3, 11, 4},

    // 30
    {3, 11, -2},
    {3, 13, 1},
    {0, 0, 1},

    {3, 14, -4},
};

const char song3[][3] = {
    // 66
    {3, 11, 1},
    {0, 0, 2},
    {3, 11, 4}, 
    {3, 13, 4}, 
    {3, 14, 2}, 
    {2, 14, 2}, 
    {2, 12, 2}, 
    {3, 13, 2}, 

    {3, 11, 1}, 
    {0, 0, 2},
    {3, 11, 4}, 
    {3, 13, 4}, 
    {3, 14, 2}, 
    {3, 11, 2}, 
    {2, 14, 2}, 
    {2, 12, 2}, 
    
    // 68
    {3, 11, 1},
    {0, 0, 2},
    {3, 11, 4}, 
    {3, 13, 4}, 
    {3, 14, 2}, 
    {2, 14, 2}, 
    {2, 12, 2}, 
    {3, 13, 2}, 

    {3, 11, 1},
    {0, 0, 2},
    {1, 9, 4},
    {1, 10, 4},
    {1, 12, 2},
    {1, 10, 2},
    {1, 9, 4},
    {1, 10, 4},
    {1, 9, 2},
};

void setup(){
    pinMode(buzzer, OUTPUT);
    // Serial.begin(9600);
}

const int song1_len = sizeof(song1) / sizeof(song1[0]);
const int song2_len = sizeof(song2) / sizeof(song2[0]);
const int song3_len = sizeof(song3) / sizeof(song3[0]);

void play_song(const char song[][3], const int len){
    // Serial.println(len);
    for (int i = 0; i < len; ++i){
        char *p = song[i];
        if (p[0] > 0){
            tone(buzzer, get_frequency(p[0], p[1]));
        }
        if (p[2] > 0)
            delay(250 / p[2]);
        else
            delay(250 * (-p[2]));
        noTone(buzzer);
        delay(100);
    }
}

void loop(){
    play_song(song1, song1_len);
    play_song(song1, song1_len);
    play_song(song2, song2_len);
    // delay(3000);
    // 44
    // play_song(song2, song2_len);
    // delay(3000);
    // 66
    play_song(song3, song3_len);
    // 70
    play_song(song3, song3_len);
    // 74
    play_song(song1, song1_len);

    delay(1000);
}
